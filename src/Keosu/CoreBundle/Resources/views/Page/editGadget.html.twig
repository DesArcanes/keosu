	{# 	
	Keosu is an open source CMS for mobile app
	Copyright (C) 2014  Vincent Le Borgne, Pockeit

    This program is free software: you can redistribute it and/or modify
    it under the terms of the GNU Affero General Public License as
    published by the Free Software Foundation, either version 3 of the
    License, or (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU Affero General Public License for more details.

    You should have received a copy of the GNU Affero General Public License
    along with this program.  If not, see <http://www.gnu.org/licenses/>.
    #}

{% extends 'KeosuCoreBundle:MainViews:page.html.twig' %}

{% block title %}
	Edit gadget
{% endblock %}
{% block content %}
<h1>Edit gadget</h1>
<br/>
<div>
	{{ form_start(form) }}
	
		<div class="imgtheme">
			{{ form_row(form.template) }}
		</div>
		{{ form_row(form.shared) }}
		{{ form_row(form.config) }}
		
		<br class="clear"/><br class="clear"/>
		<input type="submit" class="btn btn-success" />&nbsp;
		<a class="confirmModal" href="javascript:history.go(-1);" >
			<button type="button" class="btn btn-danger">Cancel</button>
		</a>
		
	{{ form_end(form) }}

</div>
<script>
	$(document).ready(function() {	
		$( ".radio" ).each(function( index ) {
			input = $(this).find('input');
			templateName=input.attr('value');
			input.attr('id',templateName);
			img = '<label for="'+templateName+'"><img src="{{url_base}}/{{gadgetDir}}{{gadgetName}}/'+templateName+'.png" template="'+templateName+'"/></label>';
			$(this).text("");
			$(this).append(input);
			$(this).append(img);
			
		});

		$(".imgtheme input[checked=checked]").parent(".radio").find("img").css("border","red solid 3px");
		
		// switch border color
		$(".imgtheme img").click(function(){
			template=$(this).attr('template');
			$("#"+template).addClass('checked','checked');
			$(".imgtheme img").css("border","none");
			$(this).css("border","red solid 3px");
		});	
	});
</script>
{% endblock %}


